---
phase: 04-module-1-content
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/visualizations/Slider.tsx, src/components/visualizations/AnimatedValue.tsx, src/components/visualizations/FlowArrow.tsx, src/components/visualizations/Entity.tsx, src/components/visualizations/index.ts]
autonomous: true
---

<objective>
Build foundational visualization components for interactive financial diagrams.

Purpose: Create reusable primitives that all visualizations will use â€” interactive sliders, animated value displays, flow arrows, and entity boxes. These form the building blocks for money flows, banking processes, and concept exploration.
Output: Base visualization component library ready for composition into specific diagrams.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-module-1-content/04-CONTEXT.md

@src/lib/motion.ts
@src/lib/utils.ts
@src/components/ui/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Slider component with real-time value display</name>
  <files>src/components/visualizations/Slider.tsx</files>
  <action>
Create an interactive slider component with animated value feedback:

```typescript
'use client';

import { motion } from '@/lib/motion';
import { cn } from '@/lib/utils';

interface SliderProps {
  label: string;
  value: number;
  onChange: (value: number) => void;
  min: number;
  max: number;
  step?: number;
  unit?: string;
  formatValue?: (value: number) => string;
  className?: string;
}
```

Features:
- Animated value display that pulses/highlights on change using motion
- Filled track showing progress percentage
- Custom styled thumb with hover scale effect
- Support for custom formatting (currency, percentages)
- Tailwind v4 CSS variables for colors (--color-primary-500, --color-surface-2, etc.)

Use the existing glass morphism design patterns from Phase 2.
  </action>
  <verify>Component renders without errors, value updates on drag</verify>
  <done>Slider with real-time feedback and value animation working</done>
</task>

<task type="auto">
  <name>Task 2: Create AnimatedValue component with spring physics</name>
  <files>src/components/visualizations/AnimatedValue.tsx</files>
  <action>
Create a component that animates between numeric values smoothly:

```typescript
'use client';

import { useEffect } from 'react';
import { motion, useSpring, useTransform } from 'motion/react';
import { cn } from '@/lib/utils';

interface AnimatedValueProps {
  value: number;
  prefix?: string;
  suffix?: string;
  decimals?: number;
  className?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
}
```

Features:
- Spring-animated transitions between numeric values (stiffness: 100, damping: 20)
- Customizable decimal places with toFixed
- Prefix/suffix support for currency ($) and units (%)
- Size variants (sm/md/lg/xl) with font-mono for tabular numbers
- Uses useSpring from motion/react for smooth interpolation

Import motion hooks directly from 'motion/react' for useSpring and useTransform.
  </action>
  <verify>Value animates smoothly when changed, no flicker</verify>
  <done>AnimatedValue with spring physics for smooth number transitions</done>
</task>

<task type="auto">
  <name>Task 3: Create FlowArrow and Entity components</name>
  <files>src/components/visualizations/FlowArrow.tsx, src/components/visualizations/Entity.tsx, src/components/visualizations/index.ts</files>
  <action>
Create FlowArrow for showing money/data flow between entities:

```typescript
// FlowArrow.tsx
interface FlowArrowProps {
  direction?: 'right' | 'left' | 'up' | 'down';
  animated?: boolean;  // flowing dot animation
  label?: string;
  value?: string;
  className?: string;
}
```

Features:
- SVG arrow with directional rotation
- Animated flowing dot when animated=true (loops along the arrow path)
- Optional label and value display
- Uses motion for the flowing dot animation

Create Entity for representing financial institutions/accounts:

```typescript
// Entity.tsx
interface EntityProps {
  icon: string;  // emoji
  label: string;
  value?: string;
  subtext?: string;
  highlighted?: boolean;
  onClick?: () => void;
  className?: string;
}
```

Features:
- Card-style box with icon, label, and optional value
- Highlighted state with primary border and shadow
- Hover/tap animations using motion
- Glass morphism styling consistent with Phase 2 design

Create barrel export in index.ts:
```typescript
export { Slider } from './Slider';
export { AnimatedValue } from './AnimatedValue';
export { FlowArrow } from './FlowArrow';
export { Entity } from './Entity';
```
  </action>
  <verify>All components render, FlowArrow animates, Entity shows hover state</verify>
  <done>FlowArrow with animated dot, Entity with highlight state, barrel export complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` succeeds
- [ ] Slider updates value in real-time with animation
- [ ] AnimatedValue smoothly transitions between numbers
- [ ] FlowArrow shows animated flowing dot
- [ ] Entity shows hover/highlighted states
- [ ] All components exported from barrel file
</verification>

<success_criteria>
- All tasks completed
- Base visualization components are reusable primitives
- Animations feel smooth and immediate
- Components follow glass morphism design language
</success_criteria>

<output>
After completion, create `.planning/phases/04-module-1-content/04-01-SUMMARY.md`
</output>
