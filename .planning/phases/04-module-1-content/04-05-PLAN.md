---
phase: 04-module-1-content
plan: 05
type: execute
wave: 3
depends_on: ["04-01", "04-02"]
files_modified: [src/components/visualizations/diagrams/PaymentMethodsFlow.tsx, src/components/visualizations/calculators/MonetaryAggregatesCalculator.tsx, src/components/visualizations/calculators/index.ts, src/components/visualizations/diagrams/index.ts]
autonomous: true
---

<objective>
Build Payment Methods Flow visualization and M1/M2 Monetary Aggregates Calculator.

Purpose: Create interactive diagrams showing how payments flow (cash vs non-cash) and a calculator that lets users explore M1 vs M2 monetary aggregates.
Output: Payment system visualization and interactive M1/M2 calculator for Lesson 1-1.2 and 1-1.3.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-module-1-content/04-CONTEXT.md

@src/components/visualizations/index.ts
@src/components/visualizations/Slider.tsx
@src/components/visualizations/AnimatedValue.tsx
@src/lib/motion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PaymentMethodsFlow visualization</name>
  <files>src/components/visualizations/diagrams/PaymentMethodsFlow.tsx</files>
  <action>
Create a branching flow diagram showing cash vs non-cash payment pathways:

```typescript
'use client';

import { useState } from 'react';
import { motion, AnimatePresence } from '@/lib/motion';
import { Entity, FlowArrow } from '@/components/visualizations';
import { cn } from '@/lib/utils';

interface PaymentMethodsFlowProps {
  className?: string;
}

export function PaymentMethodsFlow({ className }: PaymentMethodsFlowProps) {
  const [selectedPath, setSelectedPath] = useState<'cash' | 'non-cash' | null>(null);
  // ...
}
```

Layout structure (branching tree):
```
                    [Payment]
                        |
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                       â–¼
        [Cash]                  [Non-Cash]
         ğŸ’µ                         |
     Immediate              â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
     Settlement             â–¼   â–¼   â–¼   â–¼   â–¼
                         Check ACH Debit Credit Digital
                          âœ“   âš¡   ğŸ’³   ğŸ’³    ğŸ“±
```

Features:
1. **Two main branches**:
   - Cash (icon: ğŸ’µ): "Immediate, physical, anonymous"
   - Non-Cash (icon: ğŸ¦): "Bank account transfers"

2. **Non-cash sub-methods** (5 cards):
   - Check (icon: âœ“): "Instruction to bank, not money itself"
   - ACH (icon: âš¡): "Electronic batch transfers"
   - Debit Card (icon: ğŸ’³): "Direct from your account"
   - Credit Card (icon: ğŸ’³): "Bank pays, you owe them"
   - Digital (icon: ğŸ“±): "Wallets, P2P apps"

3. **Interactive selection**:
   - Click branch to expand/highlight
   - When Cash selected: show characteristics (anonymous, no trace, immediate)
   - When Non-Cash selected: show all methods with brief descriptions
   - Click individual method for full explanation

4. **Key insight callout**:
   - "A check is NOT money â€” it's an instruction to transfer money"
   - "Credit cards create loans, not payments"
   - Highlight these when respective methods are selected

5. **Timeline view** (toggle):
   - Optional view showing evolution: Cash â†’ Checks â†’ Cards â†’ Mobile â†’ Digital
   - Shows dates/decades when each became common

Style: Branching layout with animated connections, glass morphism cards for each method.
  </action>
  <verify>Diagram renders, branches expand on click, methods show explanations</verify>
  <done>Interactive Payment Methods Flow with educational insights</done>
</task>

<task type="auto">
  <name>Task 2: Create MonetaryAggregatesCalculator</name>
  <files>src/components/visualizations/calculators/MonetaryAggregatesCalculator.tsx, src/components/visualizations/calculators/index.ts</files>
  <action>
Create an interactive calculator showing M1 vs M2 composition:

```typescript
'use client';

import { useState } from 'react';
import { Slider, AnimatedValue } from '@/components/visualizations';
import { motion } from '@/lib/motion';
import { cn } from '@/lib/utils';

interface MonetaryAggregatesCalculatorProps {
  className?: string;
}

export function MonetaryAggregatesCalculator({ className }: MonetaryAggregatesCalculatorProps) {
  // Default values roughly based on real proportions
  const [currency, setCurrency] = useState(2000);      // $2T
  const [checkingDeposits, setCheckingDeposits] = useState(4000);  // $4T
  const [savingsDeposits, setSavingsDeposits] = useState(10000);   // $10T
  const [moneyMarketFunds, setMoneyMarketFunds] = useState(5000);  // $5T
  // ...
}
```

Layout:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONETARY AGGREGATES CALCULATOR                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  M1 = Currency + Checking Deposits             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  Currency in Circulation    [====    ] $2.0T   â”‚
â”‚  Checking Account Deposits  [======  ] $4.0T   â”‚
â”‚                             â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚  M1 Total:                           $6.0T    â”‚
â”‚                                                â”‚
â”‚  M2 = M1 + Savings + Money Market              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  Savings Deposits           [========] $10.0T  â”‚
â”‚  Money Market Funds         [=====   ] $5.0T   â”‚
â”‚                             â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚  M2 Total:                           $21.0T   â”‚
â”‚                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Visual: Stacked bar showing M1 inside M2]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  M1  â”‚         M2           â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Features:
1. **Four sliders** using Slider component:
   - Currency in Circulation (0-5 trillion)
   - Checking Account Deposits (0-10 trillion)
   - Savings Deposits (0-20 trillion)
   - Money Market Funds (0-10 trillion)

2. **Calculated totals** using AnimatedValue:
   - M1 = Currency + Checking (animated on change)
   - M2 = M1 + Savings + Money Market (animated on change)

3. **Visual comparison bar**:
   - Horizontal stacked bar showing M1 as subset of M2
   - Animated width changes as values update
   - Color-coded: M1 components vs M2-only components

4. **Educational tooltips**:
   - Each component has "?" icon that explains:
     - Currency: "Physical cash in circulation"
     - Checking: "Immediately available for transactions"
     - Savings: "Not directly payable but easily transferred"
     - Money Market: "Liquid investments"

5. **Liquidity indicator**:
   - Arrow showing "More Liquid â† â†’ Less Liquid"
   - M1 is more liquid than M2

Create barrel export:
```typescript
// src/components/visualizations/calculators/index.ts
export { MonetaryAggregatesCalculator } from './MonetaryAggregatesCalculator';
```
  </action>
  <verify>Calculator renders, sliders update totals, visual bar animates</verify>
  <done>Interactive M1/M2 calculator with animated values and comparison bar</done>
</task>

<task type="auto">
  <name>Task 3: Update barrel exports</name>
  <files>src/components/visualizations/diagrams/index.ts, src/components/visualizations/index.ts</files>
  <action>
Update exports to include new components:

```typescript
// src/components/visualizations/diagrams/index.ts
export { FinancialSystemFlow } from './FinancialSystemFlow';
export { MoneyFunctionsTriangle } from './MoneyFunctionsTriangle';
export { MoneyEvolutionTimeline } from './MoneyEvolutionTimeline';
export { PaymentMethodsFlow } from './PaymentMethodsFlow';
```

```typescript
// src/components/visualizations/index.ts
export { Slider } from './Slider';
export { AnimatedValue } from './AnimatedValue';
export { FlowArrow } from './FlowArrow';
export { Entity } from './Entity';
export * from './diagrams';
export * from './calculators';
```
  </action>
  <verify>All exports work correctly</verify>
  <done>All visualization components exported</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` succeeds
- [ ] PaymentMethodsFlow shows branching cash/non-cash paths
- [ ] Clicking methods shows explanations and insights
- [ ] MonetaryAggregatesCalculator has working sliders
- [ ] M1 and M2 totals animate smoothly when inputs change
- [ ] Visual comparison bar updates in real-time
- [ ] All components exported correctly
</verification>

<success_criteria>
- All tasks completed
- Payment flow clearly shows cash vs non-cash distinction
- Calculator demonstrates M1 vs M2 relationship interactively
- Educational insights are prominent (check is not money, credit creates loans)
- Instant feedback on all interactions
</success_criteria>

<output>
After completion, create `.planning/phases/04-module-1-content/04-05-SUMMARY.md`
</output>
