---
phase: 07-module-3-content
plan: 07
type: execute
wave: 4
depends_on: ["07-02", "07-03", "07-04", "07-05", "07-06"]
files_modified: [src/components/visualizations/diagrams/index.ts, src/components/modules/Module3Content.tsx]
autonomous: false
---

<objective>
Integrate all Module 3 visualizations into the module page and verify visual quality.

Purpose: Connect all visualization components to Module 3 lessons and ensure cohesive user experience.
Output: Fully functional Module 3 content page with all visualizations integrated and verified.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-module-3-content/07-02-SUMMARY.md
@.planning/phases/07-module-3-content/07-03-SUMMARY.md
@.planning/phases/07-module-3-content/07-04-SUMMARY.md
@.planning/phases/07-module-3-content/07-05-SUMMARY.md
@.planning/phases/07-module-3-content/07-06-SUMMARY.md

# Integration patterns:
@src/components/visualizations/diagrams/index.ts
@src/components/modules/Module2Content.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Export all Module 3 visualizations</name>
  <files>src/components/visualizations/diagrams/index.ts</files>
  <action>
Add exports for all new Module 3 visualization components to the diagrams index file:

```typescript
// Module 3: Risk and Return
export { RiskReturnTradeoff } from './RiskReturnTradeoff';
export { BankCapitalStructure } from './BankCapitalStructure';
export { ROECalculator } from './ROECalculator';
export { LeverageDecomposition } from './LeverageDecomposition';
export { CreditRiskFlow } from './CreditRiskFlow';
export { FICOScoreScale } from './FICOScoreScale';
export { MaturityMismatchDiagram } from './MaturityMismatchDiagram';
export { InterestRateSensitivity } from './InterestRateSensitivity';
export { LiquidityCrisisFlow } from './LiquidityCrisisFlow';
export { VaRDistribution } from './VaRDistribution';
export { RiskTypesPentagon } from './RiskTypesPentagon';
```

Add to existing exports, keeping Module 1 and Module 2 exports intact.
  </action>
  <verify>tsc --noEmit passes, all components importable from @/components/visualizations</verify>
  <done>All 11 Module 3 visualizations exported from index</done>
</task>

<task type="auto">
  <name>Task 2: Create Module 3 Content component</name>
  <files>src/components/modules/Module3Content.tsx</files>
  <action>
Create Module3Content.tsx following exact pattern from Module2Content.tsx:

**Structure:**
- Import all Module 3 visualizations
- Import module3Lessons from @/data/module3
- useState for activeLesson (default: '3-0')
- Direction-aware animations for lesson transitions
- LessonNav component for navigation

**Lesson â†’ Visualization Mapping:**

'3-0' (Overview):
- RiskTypesPentagon (overview of all risk types)
- Description: Risk-return tradeoff intro

'3-1' (Bank Capital and Profitability - parent):
- No visualization (just section intro)

'3-1.1' (Bank Equity Capital):
- BankCapitalStructure
- Description: Equity as loss absorber

'3-1.2' (Measuring Performance):
- ROECalculator
- LeverageDecomposition
- Description: ROA, ROE, Leverage

'3-2' (Bank Risks Overview - parent):
- RiskReturnTradeoff
- Description: Risk concepts intro

'3-2.1' (Overview of Risk):
- RiskTypesPentagon (if not already in 3-0)
- Description: Risk types and management

'3-2.2' (Credit Risk):
- CreditRiskFlow
- FICOScoreScale
- Description: Default, ratings, credit tools

'3-2.3' (Interest Rate Risk):
- MaturityMismatchDiagram
- InterestRateSensitivity
- Description: Maturity mismatch, duration

'3-2.4' (Liquidity Risk):
- LiquidityCrisisFlow
- Description: Bank run, fire sale

'3-2.5' (Market Risk):
- VaRDistribution
- Description: Trading book, VaR

'3-2.6' (Operational Risk):
- No special visualization (text-focused)
- Description: System failures, fraud, fintech

**Animation:**
- Same direction-aware slide animations as Module2Content
- Scroll to top on lesson change
- Staggered visualization entry

Follow Module2Content exactly for structure, styling, and animation patterns.
  </action>
  <verify>npm run build succeeds, component imports without errors</verify>
  <done>Module3Content component with all lessons and visualizations mapped</done>
</task>

<task type="auto">
  <name>Task 3: Register Module 3 Content in module page</name>
  <files>src/app/modules/[slug]/page.tsx</files>
  <action>
Update the dynamic module page to include Module 3:

1. Import Module3Content:
```typescript
import { Module3Content } from '@/components/modules/Module3Content';
```

2. Add to the module content switch/mapping:
```typescript
case 'risk-term-structure':
  return <Module3Content />;
```

Or if using object mapping:
```typescript
'risk-term-structure': Module3Content,
```

Verify the slug matches the module data (check src/data/modules.ts for Module 3 slug).
  </action>
  <verify>Visit /modules/risk-term-structure, page loads with Module 3 content</verify>
  <done>Module 3 accessible via navigation, content renders correctly</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Module 3 content with 11 interactive visualizations covering:
- Risk-Return Tradeoff curve
- Bank Capital Structure (loss absorber)
- ROE Calculator with bank presets
- Leverage Decomposition (good times/bad times)
- Credit Risk Flow (application to monitoring)
- FICO Score Scale with PD overlay
- Maturity Mismatch Diagram
- Interest Rate Sensitivity curves
- Liquidity Crisis Flow (6-step animation)
- VaR Distribution with confidence slider
- Risk Types Pentagon (5 risks)</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000
    3. Click on Module 3 (Risk and Term Structure) card
    4. Verify each lesson loads correctly:
       - 3-0: Risk pentagon shows all 5 types
       - 3-1.1: Capital structure shows loss absorption scenarios
       - 3-1.2: ROE calculator works with bank presets, leverage visual clear
       - 3-2.2: Credit flow clickable, FICO slider updates PD
       - 3-2.3: Maturity mismatch shows gap, rate sensitivity curves work
       - 3-2.4: Liquidity crisis animation plays through all steps
       - 3-2.5: VaR histogram shows with confidence slider
    5. Test lesson navigation (forward/back transitions)
    6. Verify all animations smooth, no console errors
    7. Check responsive layout on different widths
  </how-to-verify>
  <resume-signal>Type "approved" if all visualizations work correctly, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] All 11 visualizations exported from index
- [ ] Module3Content renders all lessons
- [ ] Module page shows Module 3 content at correct route
- [ ] Human verification passed for visual quality
- [ ] No console errors or warnings
- [ ] Animations smooth and responsive
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human approved visual quality
- Module 3 fully functional and accessible
</success_criteria>

<output>
After completion, create `.planning/phases/07-module-3-content/07-07-SUMMARY.md`
</output>
