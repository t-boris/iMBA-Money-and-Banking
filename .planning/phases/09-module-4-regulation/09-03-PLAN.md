---
phase: 09-module-4-regulation
plan: 03
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - src/components/visualizations/diagrams/TEDSpreadTimeline.tsx
  - src/components/visualizations/diagrams/CapitalRequirementsCalculator.tsx
  - src/components/visualizations/diagrams/CAMELSRadar.tsx
  - src/components/visualizations/diagrams/index.ts
autonomous: true
---

<objective>
Build three visualization components for Lessons 4-1.3, 4-2.1, and 4-2.2: TED Spread Crisis Timeline, Capital Requirements Calculator, and CAMELS Radar.

Purpose: Create interactive visualizations for crisis interventions, Basel capital rules, and bank examination system.
Output: Three new diagram components registered in the visualizations barrel export.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/components/visualizations/diagrams/BankingEvolutionTimeline.tsx
@src/components/visualizations/diagrams/ROECalculator.tsx
@src/components/visualizations/diagrams/RiskTypesPentagon.tsx
@src/components/visualizations/diagrams/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TEDSpreadTimeline component</name>
  <files>src/components/visualizations/diagrams/TEDSpreadTimeline.tsx</files>
  <action>
  Create an interactive timeline visualization of the 2007-2009 financial crisis through the TED Spread lens.

  Design: Animated SVG timeline with crisis events and safety net response.

  **TED Spread chart (top):**
  - SVG area chart showing TED spread over time (2006-2010)
  - X-axis: years/months, Y-axis: basis points (0-400+)
  - Approximate data points:
    - Pre-crisis (2006): ~30-50 bps (narrow, trust)
    - BNP Paribas freeze (Aug 2007): spike to ~200 bps
    - Bear Stearns (Mar 2008): spike to ~200 bps
    - Lehman Brothers (Sep 2008): spike to ~450 bps (peak)
    - Post-TARP (late 2008): gradual decline
    - Recovery (2009-2010): back to ~30-50 bps
  - Animate the line drawing from left to right on mount
  - Color gradient: green (low stress) → red (high stress)

  **Crisis event markers (clickable):**
  - Dots on the timeline at key events
  - Click to expand detail card below chart:
    1. "2007: BNP Paribas freezes funds" — First signs of mortgage crisis
    2. "Mar 2008: Bear Stearns rescue" — Fed-facilitated sale to JPMorgan
    3. "Sep 2008: Lehman Brothers collapse" — Shock to global system
    4. "Sep 2008: Deposit insurance raised $100K → $250K"
    5. "Oct 2008: TARP bailout enacted"
    6. "Fed creates emergency liquidity facilities"

  **TED Spread formula display:**
  - Show: TED = Interbank Rate − Treasury Bill Rate
  - Interpretation: narrow = trust, wide = fear

  Follow existing timeline patterns (BankingEvolutionTimeline). Use glass morphism cards, motion animations, responsive SVG.
  </action>
  <verify>npm run build succeeds without errors</verify>
  <done>TEDSpreadTimeline renders animated crisis timeline with TED spread chart, clickable event markers, and formula display.</done>
</task>

<task type="auto">
  <name>Task 2: Create CapitalRequirementsCalculator and CAMELSRadar components</name>
  <files>src/components/visualizations/diagrams/CapitalRequirementsCalculator.tsx, src/components/visualizations/diagrams/CAMELSRadar.tsx, src/components/visualizations/diagrams/index.ts</files>
  <action>
  **CapitalRequirementsCalculator.tsx:**
  Interactive calculator demonstrating Basel capital requirements and risk-weighted assets.

  Design: Interactive calculator with visual bar representation.

  **Asset Portfolio Section:**
  - Sliders for 3 asset categories with risk weights:
    - Government bonds (0% risk weight): slider 0-500B, default 100B
    - Mortgages (50% risk weight): slider 0-500B, default 200B
    - Corporate loans (100% risk weight): slider 0-500B, default 300B
  - Show each asset with its risk weight visually (color coded: green/amber/red)

  **Calculation Display:**
  - Animated calculation:
    - Total Assets = sum of all assets
    - Risk-Weighted Assets = Σ(asset × weight)
    - Required Capital = RWA × 8% (Basel minimum)
    - Capital Ratio = Equity / RWA
  - Equity slider: adjust bank equity to see if it passes/fails
  - Pass/Fail indicator (green checkmark vs red X) when capital ratio >= 8%

  **Basel Evolution Timeline (small):**
  - Three tabs: Basel I (1988), Basel II, Basel III (2010+)
  - Brief description of each iteration
  - Highlight that Basel III has stricter requirements

  **Regulatory trade-off display:**
  - Show: More Capital → Lower Failure Risk → Lower ROE
  - Animate the tradeoff as user adjusts equity slider

  **CAMELSRadar.tsx:**
  Interactive radar/hexagon chart for the CAMELS bank rating system.

  Design: SVG hexagon radar chart with interactive dimensions.

  **Radar Chart:**
  - 6 axes: Capital, Assets, Management, Earnings, Liquidity, Sensitivity
  - Each axis scored 1-5 (1 = best, 5 = worst)
  - Draw filled polygon showing bank profile
  - Animate polygon morphing on mount

  **Bank Presets:**
  - Three preset banks to compare:
    1. "Healthy Bank" — all scores 1-2 (strong profile)
    2. "Struggling Bank" — mixed scores, some 4-5 (weak areas highlighted)
    3. "Problem Bank" — several 4-5 scores → triggers problem bank list
  - Toggle between presets, watch radar morph with spring animation

  **Dimension Details:**
  - Click any axis label to expand detail panel:
    - C: Capital Adequacy — loss absorption capacity
    - A: Asset Quality — loan performance and default risk
    - M: Management Quality — governance and compliance
    - E: Earnings — profit sustainability
    - L: Liquidity — ability to meet withdrawals
    - S: Sensitivity to Market Risk — exposure to rate/price shocks

  **Problem Bank Indicator:**
  - If composite score > threshold → show "Problem Bank List" warning
  - Explain consequences: restrictions, required corrections, not public

  Follow existing radar pattern (RiskTypesPentagon for hexagon shape). Use spring animations, glass morphism.

  **Update diagrams/index.ts:**
  Add exports for TEDSpreadTimeline, CapitalRequirementsCalculator, CAMELSRadar.
  </action>
  <verify>npm run build succeeds without errors</verify>
  <done>CapitalRequirementsCalculator renders interactive Basel capital calculator with risk weights. CAMELSRadar renders hexagon radar with bank presets. Both exported from diagrams/index.ts.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] TEDSpreadTimeline renders animated crisis chart with event markers
- [ ] CapitalRequirementsCalculator renders interactive Basel calculator
- [ ] CAMELSRadar renders hexagon radar with three bank presets
- [ ] All components exported from diagrams/index.ts
</verification>

<success_criteria>
- All tasks completed
- Three visualization components working with animations
- Calculators are interactive with real-time updates
- Consistent with existing design patterns
</success_criteria>

<output>
After completion, create `.planning/phases/09-module-4-regulation/09-03-SUMMARY.md`
</output>
