---
phase: 05.1-module-2-modern-banking
plan: 06
type: execute
wave: 3
depends_on: ["05.1-01"]
files_modified: [src/components/visualizations/diagrams/BankConsolidationChart.tsx, src/components/visualizations/diagrams/index.ts]
autonomous: true
---

<objective>
Create an animated Bank Consolidation Chart showing the decline in US bank count.

Purpose: Visualize how bank count dropped from 14,000+ in 1985 to under 5,000 today.
Output: BankConsolidationChart component with animated line/bar chart and driver explanations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.1-module-2-modern-banking/05.1-CONTEXT.md

@src/components/visualizations/AnimatedValue.tsx
@src/lib/motion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BankConsolidationChart component</name>
  <files>src/components/visualizations/diagrams/BankConsolidationChart.tsx</files>
  <action>
Create an animated chart showing US bank count decline over time:

**Data Points (approximate):**
- 1985: 14,400 banks (peak)
- 1990: 12,300 banks
- 1995: 9,900 banks (post Riegle-Neal)
- 2000: 8,300 banks (post Gramm-Leach-Bliley)
- 2005: 7,500 banks
- 2010: 6,500 banks (post crisis)
- 2015: 5,300 banks
- 2020: 4,400 banks

**Consolidation Drivers (clickable):**
1. **Technology** - ATMs, online banking eliminated need for branches
2. **Competition** - Money market funds, securitization challenged banks
3. **Deregulation** - Riegle-Neal enabled mergers across states
4. **Economies of Scale** - Larger banks have lower costs per customer
5. **Financial Crisis** - Weak banks failed or were acquired

**Features:**
- Animated line chart drawing from left to right
- Key events marked on timeline (Riegle-Neal 1994, GLB 1999, Crisis 2008)
- Hover/click on year to see bank count with AnimatedValue
- Driver cards below chart - click to highlight relevant period
- Glass morphism styling
- Responsive: SVG-based chart

**Structure:**
```typescript
'use client';

import { useState, useEffect } from 'react';
import { motion } from '@/lib/motion';
import { AnimatedValue } from '../AnimatedValue';
import { cn } from '@/lib/utils';

interface DataPoint {
  year: number;
  banks: number;
  event?: string;
}

const consolidationData: DataPoint[] = [
  { year: 1985, banks: 14400, event: 'Peak bank count' },
  { year: 1990, banks: 12300 },
  { year: 1994, banks: 10500, event: 'Riegle-Neal Act' },
  { year: 1999, banks: 8600, event: 'Gramm-Leach-Bliley' },
  { year: 2008, banks: 7000, event: 'Financial Crisis' },
  { year: 2020, banks: 4400 },
];

interface Driver {
  id: string;
  name: string;
  description: string;
  period: [number, number]; // year range
}

export function BankConsolidationChart({ className }: { className?: string }) {
  const [selectedYear, setSelectedYear] = useState<number | null>(null);
  const [selectedDriver, setSelectedDriver] = useState<string | null>(null);
  const [animated, setAnimated] = useState(false);

  useEffect(() => {
    setAnimated(true);
  }, []);

  // ... SVG chart implementation
}
```

**Chart Implementation:**
- Use SVG with motion.path for animated line
- Scale: Y-axis 0-15,000, X-axis 1985-2020
- Draw line animation using pathLength
- Dots at each data point
- Event labels at key years
- Click dot to select and show details
  </action>
  <verify>`npm run build` succeeds</verify>
  <done>BankConsolidationChart renders with animated line, data points, event markers, driver cards</done>
</task>

<task type="auto">
  <name>Task 2: Export BankConsolidationChart</name>
  <files>src/components/visualizations/diagrams/index.ts</files>
  <action>
Add export for BankConsolidationChart:

```typescript
export { BankConsolidationChart } from './BankConsolidationChart';
```
  </action>
  <verify>`npm run build` succeeds, component is importable</verify>
  <done>BankConsolidationChart exported and accessible</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] Chart animates on mount
- [ ] Data points are clickable/hoverable
- [ ] Key events (1994, 1999, 2008) are marked
- [ ] Driver cards explain consolidation causes
- [ ] Responsive layout works
</verification>

<success_criteria>
- All tasks completed
- Animated chart clearly shows bank count decline
- Key events and drivers are educational
- Consistent with existing visualization patterns
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-module-2-modern-banking/05.1-06-SUMMARY.md`
</output>
