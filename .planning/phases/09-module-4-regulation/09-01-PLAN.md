---
phase: 09-module-4-regulation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/index.ts
  - src/data/modules.ts
  - src/data/module4/lessons.ts
  - src/data/module4/concepts.ts
  - src/data/module4/index.ts
autonomous: true
---

<objective>
Create Module 4 data foundation: type updates, module metadata update, lessons, and concepts for Regulation module.

Purpose: Establish the data layer that all visualization components and the content page will consume.
Output: Module 4 lesson structure (15 lessons), ~55 concepts, updated module metadata, and new 'regulation' concept category.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/types/index.ts
@src/data/modules.ts
@src/data/module3/index.ts
@src/data/module3/lessons.ts
@src/data/module3/concepts.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update types and module metadata for Module 4</name>
  <files>src/types/index.ts, src/data/modules.ts</files>
  <action>
  1. In src/types/index.ts, add 'regulation' to the Concept category union type:
     `category: 'money' | 'payment' | 'financial-system' | 'institutions' | 'economy' | 'risk' | 'capital' | 'regulation';`

  2. In src/data/modules.ts, update Module 4 entry to reflect the Regulation content:
     - id: 4
     - title: 'Regulation'
     - description: 'Why banks are regulated, the government safety net, supervision and stress testing, too big to fail, and shadow banking.'
     - icon: '⚖️' (balance scale - represents regulation/law)
     - slug: 'regulation'
  </action>
  <verify>TypeScript compiles without errors: npx tsc --noEmit</verify>
  <done>Concept type includes 'regulation' category. Module 4 metadata updated with correct title, description, icon, and slug.</done>
</task>

<task type="auto">
  <name>Task 2: Create Module 4 lessons and concepts data</name>
  <files>src/data/module4/lessons.ts, src/data/module4/concepts.ts, src/data/module4/index.ts</files>
  <action>
  Create src/data/module4/ directory with three files following the exact pattern of src/data/module3/.

  **src/data/module4/index.ts:**
  Export module4Lessons and module4Concepts (same pattern as module3/index.ts).

  **src/data/module4/lessons.ts:**
  Create 15 lessons following the Lesson type. Use dot notation for sub-lessons with parentId. All content from the course notes:

  - 4-0: Overview (order: 0) — Why banks are regulated and how regulation works
  - 4-1: Understanding Bank Regulation (order: 1) — General regulation theory and bank-specific rationale
  - 4-1.1: Goals of Financial Regulation (parentId: '4-1', order: 2) — Market failure, negative externalities, micro/macroprudential, moral hazard
  - 4-1.2: Government Safety Net (parentId: '4-1', order: 3) — Bank fragility, bank runs, deposit insurance, lender of last resort
  - 4-1.3: Crisis Interventions 2007-2009 (parentId: '4-1', order: 4) — TED spread, safety net expansion, moral hazard
  - 4-2: Regulation and Supervision in Practice (order: 5) — Rules vs oversight distinction
  - 4-2.1: Bank Regulation Rules (parentId: '4-2', order: 6) — Entry/competition, activities, funding, disclosure, Basel Accord, capital requirements
  - 4-2.2: Supervisory Process (parentId: '4-2', order: 7) — Enforcement, examination, CAMELS, problem bank list
  - 4-2.3: Stress Testing (parentId: '4-2', order: 8) — SCAP, CCAR, scenario design, stressed capital ratio
  - 4-3: 21st Century Challenges (order: 9) — Modern regulatory challenges
  - 4-3.1: Too Big to Fail (parentId: '4-3', order: 10) — Bank concentration, systemic risk, FSOC, SIFI, G-SIB, surcharges
  - 4-3.2: Shadow Banking (parentId: '4-3', order: 11) — Definition, regulatory arbitrage, repos, MBS
  - 4-3.3: Money Market Funds (parentId: '4-3', order: 12) — 2008 run, floating NAV, gates, 2020 COVID repeat

  **src/data/module4/concepts.ts:**
  Create ~55 concepts using the Concept type. Use category: 'regulation' for most. Include ALL concepts from the course notes. Group by lesson. Use kebab-case IDs. Each concept must have:
  - id: unique kebab-case (e.g., 'bank-regulation', 'market-failure')
  - term: English term name
  - definition: English definition from the course notes [[term]] definitions
  - category: 'regulation' for regulation-specific; 'institutions' for specific bodies (FDIC, Fed, FSOC); 'risk' for risk-related (systemic risk, moral hazard, bank fragility); 'financial-system' for system-level concepts
  - relatedConcepts: array of related concept IDs within module 4
  - lessonId: the lesson this concept belongs to

  Concepts to include (from course notes, ALL of them):

  Lesson 4-0: bank-regulation (overview)
  Lesson 4-1: regulation
  Lesson 4-1.1: market-failure, negative-externality, bank-failure, systemic-failure, microprudential-regulation, macroprudential-regulation, financial-stability, customer-protection, redlining, moral-hazard, tarp, cost-benefit-analysis, unintended-consequences
  Lesson 4-1.2: banking-panic, government-safety-net, deposit-insurance, lender-of-last-resort, bank-fragility, liquidity-mismatch, fire-sale-prices, bank-run, financial-contagion, information-asymmetry, counterparty-risk, fdic-deposit-insurance, ex-ante-run-prevention, federal-reserve-lolr
  Lesson 4-1.3: ted-spread, liquidity-facilities, safety-net-moral-hazard
  Lesson 4-2: bank-supervision
  Lesson 4-2.1: safety-and-soundness, gambling-for-survival, proprietary-trading, leverage-cap, capital-requirement, wholesale-funding, disclosure-requirements, occ, basel-accord, regulatory-race-to-bottom, risk-weighted-assets, risk-based-capital-ratio, basel-iii, loss-bearing-capacity, glass-steagall-act
  Lesson 4-2.2: enforcement-action, bank-examination, quarterly-financial-reports, onsite-examination, camels-score, capital-adequacy-camels, asset-quality, management-quality, earnings-camels, liquidity-camels, sensitivity-market-risk, problem-bank-list, risk-management
  Lesson 4-2.3: stress-testing, scap, ccar, capital-plan, stressed-capital-ratio
  Lesson 4-3.1: too-big-to-fail, bank-concentration, economies-of-scale, economies-of-scope, implicit-government-guarantee, systemic-risk, fsoc, sifi, g-sib, systemic-risk-surcharge
  Lesson 4-3.2: shadow-banking, commercial-bank-definition, mbs, repurchase-agreement, money-market-mutual-fund, regulatory-arbitrage, limited-regulatory-authority
  Lesson 4-3.3: industry-run, floating-nav, liquidity-fees, redemption-gates, preemptive-run-incentive
  </action>
  <verify>npx tsc --noEmit passes. Verify concept count >= 55 and lesson count = 13 (15 including parent sections).</verify>
  <done>Module 4 data directory created with lessons.ts (13 lessons), concepts.ts (~55 concepts), and index.ts barrel export. All types correct.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npx tsc --noEmit succeeds
- [ ] Module 4 has 13 lessons with correct hierarchy
- [ ] Module 4 has ~55 concepts covering ALL terms from course notes
- [ ] Module metadata updated in modules.ts
- [ ] New 'regulation' category added to Concept type
</verification>

<success_criteria>
- All tasks completed
- TypeScript compiles without errors
- Every concept from course notes represented
- Module 4 data follows exact same patterns as Module 3
</success_criteria>

<output>
After completion, create `.planning/phases/09-module-4-regulation/09-01-SUMMARY.md`
</output>
