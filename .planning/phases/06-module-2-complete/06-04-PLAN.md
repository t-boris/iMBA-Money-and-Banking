---
phase: 06-module-2-complete
plan: 04
type: execute
wave: 3
depends_on: ["06-02", "06-03"]
files_modified: [src/components/visualizations/diagrams/BankBalanceSheetDetailed.tsx, src/components/visualizations/diagrams/index.ts]
autonomous: true
---

<objective>
Create detailed balance sheet visualization for Lesson 2-11.

Purpose: Visualize bank balance sheet structure showing assets, liabilities, and the banking book vs trading book distinction.
Output: Interactive balance sheet visualization with drill-down capability.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@src/components/visualizations/diagrams/BankBalanceSheet.tsx
@src/components/visualizations/AnimatedValue.tsx
@src/lib/motion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BankBalanceSheetDetailed visualization</name>
  <files>src/components/visualizations/diagrams/BankBalanceSheetDetailed.tsx</files>
  <action>
Create comprehensive balance sheet visualization based on JPMorgan example from course:

ASSETS (Left side) - What bank owns:
1. Cash and Due from Banks (~10%)
   - Vault cash
   - Reserves at Fed
   - Due from other banks

2. Securities (~25%)
   - Banking Book (Investment securities - held to maturity)
     * Treasury bonds
     * Agency securities
   - Trading Book (Trading assets - marked to market)
     * Equity positions
     * Bond positions
     * Derivatives (long)

3. Loans (~55%)
   - Retail: Mortgages, credit cards, auto loans
   - Wholesale: Corporate loans, commercial real estate

4. Other Assets (~10%)
   - Goodwill, premises, equipment

LIABILITIES + EQUITY (Right side) - How bank funded:
1. Deposits (~70%)
   - Transaction accounts (checking)
   - Non-transaction (savings, CDs)

2. Borrowings (~20%)
   - Fed Funds purchased
   - Repo agreements
   - Long-term debt

3. Equity (~10%)
   - Common stock
   - Retained earnings

Interactive features:
- Two-column layout: Assets left, Liabilities+Equity right
- Must balance: Assets = Liabilities + Equity
- Click categories to expand sub-items
- Animated percentage bars showing composition
- Toggle: JPMorgan (money center) vs Community Bank comparison
  - Community: More loans, more deposits, simpler structure
  - Money Center: More trading book, more wholesale funding
- Highlight Banking Book vs Trading Book distinction with color
- Show typical dollar amounts for JPMorgan scale ($3.4T assets)

Color scheme:
- Assets: shades of primary blue
- Liabilities: shades of amber
- Equity: emerald (buffer/safety)
- Banking book: solid colors
- Trading book: striped or gradient pattern

Use AnimatedValue for percentages. Use motion for expand/collapse.
  </action>
  <verify>npx tsc --noEmit passes</verify>
  <done>BankBalanceSheetDetailed renders with expandable categories and bank type toggle</done>
</task>

<task type="auto">
  <name>Task 2: Export new component</name>
  <files>src/components/visualizations/diagrams/index.ts</files>
  <action>
Add export for new visualization:
- export { BankBalanceSheetDetailed } from './BankBalanceSheetDetailed';

Add alongside existing exports from 06-02 and 06-03.
  </action>
  <verify>Import works</verify>
  <done>Component exported from diagrams/index.ts</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npx tsc --noEmit passes
- [ ] npm run build succeeds
- [ ] Balance sheet balances (assets = liabilities + equity)
- [ ] Expandable categories work
- [ ] Bank type toggle animates smoothly
</verification>

<success_criteria>
- All tasks completed
- Visualization clearly shows balance sheet structure
- Banking vs trading book distinction is clear
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-module-2-complete/06-04-SUMMARY.md`
</output>
