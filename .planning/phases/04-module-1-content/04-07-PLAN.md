---
phase: 04-module-1-content
plan: 07
type: execute
wave: 4
depends_on: ["04-03", "04-04", "04-05", "04-06"]
files_modified: [src/app/modules/[slug]/page.tsx, src/components/modules/Module1Content.tsx, src/components/modules/LessonNav.tsx, src/components/modules/index.ts]
autonomous: false
---

<objective>
Integrate all Module 1 visualizations into the module page with lesson-based navigation.

Purpose: Wire up all the visualizations created in Plans 03-06 into the Module 1 page, organized by lesson with smooth navigation.
Output: Complete, interactive Module 1 page with all visualizations accessible through lesson navigation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-module-1-content/04-CONTEXT.md

@src/app/modules/[slug]/page.tsx
@src/data/module1/lessons.ts
@src/components/visualizations/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Module1Content component with lesson sections</name>
  <files>src/components/modules/Module1Content.tsx, src/components/modules/LessonNav.tsx, src/components/modules/index.ts</files>
  <action>
Create the main Module 1 content component that organizes visualizations by lesson:

```typescript
// src/components/modules/Module1Content.tsx
'use client';

import { useState } from 'react';
import { motion, AnimatePresence } from '@/lib/motion';
import { module1Lessons } from '@/data/module1';
import { LessonNav } from './LessonNav';
import {
  FinancialSystemFlow,
  MoneyFunctionsTriangle,
  MoneyEvolutionTimeline,
  PaymentMethodsFlow,
  DirectIndirectFinance,
  BankBalanceSheet,
  MonetaryAggregatesCalculator,
} from '@/components/visualizations';
import { Section, Container } from '@/components/ui';
import { cn } from '@/lib/utils';

interface Module1ContentProps {
  className?: string;
}

export function Module1Content({ className }: Module1ContentProps) {
  const [activeLesson, setActiveLesson] = useState('1-0');
  // ...
}
```

Features:
1. **Lesson navigation sidebar/tabs**:
   - List all lessons from module1Lessons
   - Show hierarchy (main lessons and sub-lessons indented)
   - Highlight active lesson
   - Click to navigate between lessons

2. **Content sections by lesson**:
   - **Lesson 1-0 (Overview)**:
     - FinancialSystemFlow diagram (hero visualization)
     - Brief intro text

   - **Lesson 1-1.1 (Money Functions)**:
     - MoneyFunctionsTriangle
     - MoneyEvolutionTimeline

   - **Lesson 1-1.2 (Payments)**:
     - PaymentMethodsFlow

   - **Lesson 1-1.3 (Money & Inflation)**:
     - MonetaryAggregatesCalculator

   - **Lesson 1-2.1 (What Financial System Does)**:
     - FinancialSystemFlow (different view/context)

   - **Lesson 1-2.2 (Markets vs Institutions)**:
     - DirectIndirectFinance

   - **Lesson 1-2.3 (Banks vs Non-Banks)**:
     - BankBalanceSheet

   - **Lesson 1-2.4 (Non-Banks)** and **Lesson 1-3.1 (Finance & Economy)**:
     - Placeholder for now (future visualizations)

3. **Animated transitions**:
   - Use AnimatePresence for lesson content switching
   - Fade/slide animation when changing lessons
   - Smooth scroll to top when lesson changes

4. **Responsive layout**:
   - Desktop: Left sidebar for lessons, main content right
   - Mobile: Top tabs/dropdown for lessons, content below

Create LessonNav component:
```typescript
// src/components/modules/LessonNav.tsx
interface LessonNavProps {
  lessons: Lesson[];
  activeLesson: string;
  onLessonChange: (lessonId: string) => void;
  className?: string;
}
```

Features:
- Hierarchical list showing main lessons and sub-lessons
- Visual indicator for current lesson
- Smooth scroll-like behavior
- Collapse/expand for sub-lessons on mobile

Create barrel export:
```typescript
// src/components/modules/index.ts
export { Module1Content } from './Module1Content';
export { LessonNav } from './LessonNav';
```
  </action>
  <verify>Components render, lesson navigation works, visualizations display correctly</verify>
  <done>Module1Content with lesson sections and navigation</done>
</task>

<task type="auto">
  <name>Task 2: Update module page to use Module1Content</name>
  <files>src/app/modules/[slug]/page.tsx</files>
  <action>
Update the module page to conditionally render Module1Content for Module 1:

```typescript
import { modules } from '@/data/modules';
import { notFound } from 'next/navigation';
import {
  Container,
  Section,
  Card,
  CardHeader,
  CardTitle,
  CardContent,
} from '@/components/ui';
import { Module1Content } from '@/components/modules';
import Link from 'next/link';

// ... existing generateStaticParams and generateMetadata ...

export default async function ModulePage({
  params,
}: {
  params: Promise<{ slug: string }>;
}) {
  const { slug } = await params;
  const module = modules.find((m) => m.slug === slug);

  if (!module) {
    notFound();
  }

  // ... existing navigation logic ...

  // Render module-specific content
  const renderModuleContent = () => {
    switch (module.id) {
      case 1:
        return <Module1Content />;
      default:
        // Placeholder for other modules
        return (
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            <Card variant="default">
              <CardHeader>
                <CardTitle className="text-lg">Coming Soon</CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-text-secondary text-sm">
                  Interactive content for this module is under development.
                </p>
              </CardContent>
            </Card>
          </div>
        );
    }
  };

  return (
    <>
      {/* Module Header - keep existing */}
      <Section spacing="md" className="bg-gradient-to-b from-surface-0 to-surface-1">
        {/* ... existing header code ... */}
      </Section>

      {/* Module Content - new */}
      <Section spacing="lg">
        <Container>
          {renderModuleContent()}
        </Container>
      </Section>

      {/* Module Navigation - keep existing */}
      <Section spacing="md" className="border-t border-surface-2">
        {/* ... existing navigation code ... */}
      </Section>
    </>
  );
}
```

Key changes:
- Import Module1Content
- Add renderModuleContent function with switch statement
- Replace placeholder cards with module-specific content
- Keep header and navigation unchanged
  </action>
  <verify>Module 1 page shows visualizations, other modules show placeholder</verify>
  <done>Module page conditionally renders Module1Content for Module 1</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Module 1 page with all interactive visualizations organized by lesson</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000
    3. Click on Module 1 (Money and the Financial System)
    4. Verify: Lesson navigation appears (sidebar or tabs)
    5. Test each lesson section:
       - Lesson 1-0: Financial System Flow diagram with animated arrows
       - Lesson 1-1.1: Money Functions Triangle and Evolution Timeline
       - Lesson 1-1.2: Payment Methods Flow diagram
       - Lesson 1-1.3: M1/M2 Calculator with working sliders
       - Lesson 1-2.2: Direct vs Indirect Finance comparison
       - Lesson 1-2.3: Bank Balance Sheet with interactive values
    6. Test interactions:
       - Click entities in diagrams to see details
       - Adjust sliders to see animated value changes
       - Switch between lessons smoothly
    7. Test responsive:
       - Resize window to check mobile layout
       - Lesson nav should adapt (tabs/dropdown on mobile)
    8. Check animations:
       - Money particles flowing in arrows
       - Values animating when changed
       - Smooth transitions between lessons
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 4, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` succeeds (static export)
- [ ] Module 1 page shows lesson navigation
- [ ] All visualizations render in their respective lessons
- [ ] Clicking lessons switches content smoothly
- [ ] All interactive elements work (sliders, clicks, hovers)
- [ ] Animations are smooth and playful
- [ ] Responsive layout works on mobile
- [ ] Other modules show appropriate placeholder
</verification>

<success_criteria>
- All tasks completed
- User approved visual verification
- Module 1 page is complete with all visualizations
- Navigation between lessons is intuitive
- Build succeeds for static export
</success_criteria>

<output>
After completion, create `.planning/phases/04-module-1-content/04-07-SUMMARY.md`
</output>
