---
phase: 05.1-module-2-modern-banking
plan: 04
type: execute
wave: 2
depends_on: ["05.1-01"]
files_modified: [src/components/visualizations/calculators/InterestSpreadCalculator.tsx, src/components/visualizations/calculators/index.ts]
autonomous: true
---

<objective>
Create an interactive Interest Spread Calculator visualization.

Purpose: Show how banks make money from the difference between loan rates and deposit rates.
Output: InterestSpreadCalculator component with sliders and animated profit display.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.1-module-2-modern-banking/05.1-CONTEXT.md

@src/components/visualizations/calculators/MonetaryAggregatesCalculator.tsx
@src/components/visualizations/Slider.tsx
@src/components/visualizations/AnimatedValue.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create InterestSpreadCalculator component</name>
  <files>src/components/visualizations/calculators/InterestSpreadCalculator.tsx</files>
  <action>
Create an interactive calculator showing how banks profit from interest spread. Follow MonetaryAggregatesCalculator pattern:

**Model (from CONTEXT.md):**
```
Net Interest Income = Interest Income - Interest Expense
Total Revenue = Net Interest Income + Fee Income
```

**Interactive Sliders:**
1. **Deposit Rate** (0-5%, default 2%)
   - What bank pays to depositors
   - Tied to Fed funds rate

2. **Loan Rate** (2-12%, default 6%)
   - What bank charges borrowers
   - Must be > deposit rate

3. **Total Deposits** ($100B - $1T, default $500B)
   - Bank's liability

4. **Loan-to-Deposit Ratio** (50-95%, default 80%)
   - How much of deposits are lent out

**Calculated Values (animated):**
- Total Loans = Deposits × LTD Ratio
- Interest Income = Loans × Loan Rate
- Interest Expense = Deposits × Deposit Rate
- **Net Interest Income** = Interest Income - Interest Expense
- **Interest Spread** = Loan Rate - Deposit Rate

**Features:**
- Real-time calculation as sliders move
- AnimatedValue for smooth number transitions
- Visual bar comparing income vs expense
- "3-6-3 Rule" preset button (3% deposits, 6% loans)
- "Modern Bank" preset (1% deposits, 5% loans, high fee income)
- Warning if spread < 1% (unprofitable)
- Color coding: emerald for income, amber for expense, primary for profit

**Structure:**
```typescript
'use client';

import { useState } from 'react';
import { motion } from '@/lib/motion';
import { Slider } from '../Slider';
import { AnimatedValue } from '../AnimatedValue';
import { cn } from '@/lib/utils';

interface BankMetrics {
  depositRate: number;
  loanRate: number;
  totalDeposits: number;
  ltdRatio: number;
}

export function InterestSpreadCalculator({ className }: { className?: string }) {
  const [metrics, setMetrics] = useState<BankMetrics>({
    depositRate: 2,
    loanRate: 6,
    totalDeposits: 500,
    ltdRatio: 80,
  });

  // Calculations
  const totalLoans = metrics.totalDeposits * (metrics.ltdRatio / 100);
  const interestIncome = totalLoans * (metrics.loanRate / 100);
  const interestExpense = metrics.totalDeposits * (metrics.depositRate / 100);
  const netInterestIncome = interestIncome - interestExpense;
  const spread = metrics.loanRate - metrics.depositRate;

  // ... render
}
```

**Layout:**
- Left: Sliders for inputs
- Right: Results with animated values
- Bottom: Visual bar chart comparing income/expense
- Preset buttons at top
  </action>
  <verify>`npm run build` succeeds</verify>
  <done>InterestSpreadCalculator renders with working sliders, real-time calculations, presets</done>
</task>

<task type="auto">
  <name>Task 2: Export InterestSpreadCalculator</name>
  <files>src/components/visualizations/calculators/index.ts</files>
  <action>
Add export for InterestSpreadCalculator:

```typescript
export { InterestSpreadCalculator } from './InterestSpreadCalculator';
```
  </action>
  <verify>`npm run build` succeeds, component is importable from '@/components/visualizations'</verify>
  <done>InterestSpreadCalculator exported and accessible</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] All sliders work and update calculations
- [ ] AnimatedValue smoothly transitions on change
- [ ] Preset buttons (3-6-3 Rule, Modern Bank) work
- [ ] Visual bar comparison shows income vs expense
- [ ] Spread warning shows when < 1%
</verification>

<success_criteria>
- All tasks completed
- Calculator demonstrates bank profit model clearly
- Interactive with real-time feedback
- Presets help illustrate historical changes
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-module-2-modern-banking/05.1-04-SUMMARY.md`
</output>
