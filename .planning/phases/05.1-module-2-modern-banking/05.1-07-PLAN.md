---
phase: 05.1-module-2-modern-banking
plan: 07
type: execute
wave: 4
depends_on: ["05.1-02", "05.1-03", "05.1-04", "05.1-05", "05.1-06"]
files_modified: [src/components/modules/Module2Content.tsx, src/components/modules/index.ts, src/app/modules/[slug]/page.tsx]
autonomous: false
---

<objective>
Integrate all Module 2 visualizations into the module page with lesson-based navigation.

Purpose: Wire up all the visualizations created in Plans 02-06 into the Module 2 page, organized by lesson with smooth navigation.
Output: Complete, interactive Module 2 page with all visualizations accessible through lesson navigation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.1-module-2-modern-banking/05.1-CONTEXT.md

@src/components/modules/Module1Content.tsx
@src/components/modules/LessonNav.tsx
@src/data/module2/lessons.ts
@src/components/visualizations/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Module2Content component</name>
  <files>src/components/modules/Module2Content.tsx, src/components/modules/index.ts</files>
  <action>
Create the Module 2 content component following the Module1Content pattern exactly:

**Lesson to Visualization Mapping:**

- **Lesson 2-0 (Overview)**: Module intro with clickable topic cards (no visualization)

- **Lesson 2-1 (Early Banking)**:
  - BankingEvolutionTimeline
  - BankOrganizationComparison (Unit Bank, Branch Network focus)

- **Lesson 2-2 (Bank Holding Companies)**:
  - BankOrganizationComparison (BHC focus)
  - InterestSpreadCalculator with 3-6-3 preset highlighted

- **Lesson 2-3 (Deregulation)**:
  - RegulationImpactFlow
  - BankOrganizationComparison (FHC focus)

- **Lesson 2-4 (Bank Consolidation)**:
  - BankConsolidationChart

- **Lesson 2-5 (Modern Bank Revenue)**:
  - InterestSpreadCalculator with Modern Bank preset

**Structure:**
```typescript
'use client';

import { useState, useEffect } from 'react';
import { motion, AnimatePresence } from '@/lib/motion';
import { module2Lessons } from '@/data/module2';
import { LessonNav } from './LessonNav';
import {
  BankingEvolutionTimeline,
  BankOrganizationComparison,
  InterestSpreadCalculator,
  RegulationImpactFlow,
  BankConsolidationChart,
} from '@/components/visualizations';
import { cn } from '@/lib/utils';

interface Module2ContentProps {
  className?: string;
}

export function Module2Content({ className }: Module2ContentProps) {
  const [activeLesson, setActiveLesson] = useState('2-0');
  const [direction, setDirection] = useState(0);
  // ... follow Module1Content pattern exactly
}
```

**Features (matching Module 1):**
1. LessonNav sidebar on desktop, hidden on mobile
2. Direction-aware slide animations
3. Prev/Next navigation buttons
4. Scroll to top on lesson change
5. Overview page with clickable topic cards

Add to Module2Content export to src/components/modules/index.ts:
```typescript
export { Module2Content } from './Module2Content';
```
  </action>
  <verify>Components compile without TypeScript errors</verify>
  <done>Module2Content with lesson sections and navigation created</done>
</task>

<task type="auto">
  <name>Task 2: Update module page to render Module2Content</name>
  <files>src/app/modules/[slug]/page.tsx</files>
  <action>
Update the module page switch statement to render Module2Content for Module 2:

```typescript
import { Module1Content, Module2Content } from '@/components/modules';

// In renderModuleContent():
const renderModuleContent = () => {
  switch (module.id) {
    case 1:
      return <Module1Content />;
    case 2:
      return <Module2Content />;
    default:
      // ... existing placeholder
  }
};
```
  </action>
  <verify>`npm run build` succeeds</verify>
  <done>Module page conditionally renders Module2Content for Module 2</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Module 2 page with all interactive visualizations organized by lesson</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000
    3. Click on Module 2 (History of Modern Banking)
    4. Verify: Lesson navigation appears (sidebar on desktop)
    5. Test each lesson section:
       - Lesson 2-0: Overview with clickable topic cards
       - Lesson 2-1: Banking Evolution Timeline + Bank Organization Comparison
       - Lesson 2-2: Bank Organization (BHC) + Interest Spread Calculator
       - Lesson 2-3: Regulation Impact Flow + FHC visualization
       - Lesson 2-4: Bank Consolidation Chart
       - Lesson 2-5: Interest Spread Calculator (Modern Bank preset)
    6. Test interactions:
       - Click events in timeline to see details
       - Toggle between organization forms
       - Adjust calculator sliders
       - Switch between regulations
       - Click chart data points
    7. Test responsive:
       - Resize window to check mobile layout
       - Lesson nav should adapt
    8. Check animations:
       - Smooth transitions between lessons
       - Chart animations on mount
       - Value animations on slider change
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 5.1, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` succeeds (static export)
- [ ] Module 2 page shows lesson navigation
- [ ] All visualizations render in their respective lessons
- [ ] Clicking lessons switches content smoothly
- [ ] All interactive elements work
- [ ] Animations are smooth
- [ ] Responsive layout works on mobile
- [ ] Module 1 still works correctly
</verification>

<success_criteria>
- All tasks completed
- User approved visual verification
- Module 2 page is complete with all visualizations
- Navigation between lessons is intuitive
- Build succeeds for static export
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-module-2-modern-banking/05.1-07-SUMMARY.md`
</output>
